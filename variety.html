<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRAVITY | Variety & Media</title>
    <style>
        :root {
            --main-purple: #ab47bc;
            --dark-purple: #4a148c;
            --glass: rgba(255, 255, 255, 0.6);
        }

        body {
            background: linear-gradient(135deg, #fdfcfb 0%, #e2d1f9 100%);
            font-family: 'PingFang TC', sans-serif;
            color: var(--dark-purple);
            margin: 0;
            padding-bottom: 50px;
        }

        header { padding: 40px 5%; text-align: center; }

        /* --- æœå°‹ç¯©é¸æ§åˆ¶å° --- */
        .filter-console {
            background: var(--glass);
            backdrop-filter: blur(15px);
            margin: 0 5% 40px 5%;
            padding: 25px;
            border-radius: 25px;
            border: 1px solid white;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(171, 71, 188, 0.1);
        }

        .filter-group { display: flex; flex-direction: column; gap: 5px; }
        .filter-group label { font-size: 0.8rem; font-weight: bold; color: var(--main-purple); }
        
        input, select {
            padding: 10px;
            border-radius: 12px;
            border: 1px solid #e1bee7;
            outline: none;
            color: var(--dark-purple);
        }

        /* --- å…§å®¹å€å¡Š --- */
        .category-section { padding: 0 5%; margin-bottom: 80px; }
        .category-title { 
            font-size: 2.2rem; 
            letter-spacing: 3px;
            border-bottom: 3px solid var(--main-purple);
            display: inline-block;
            margin-bottom: 30px;
        }

        .variety-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        /* --- å¡ç‰‡æ¨£å¼ --- */
        .v-card {
            background: var(--glass);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid white;
            transition: 0.3s;
        }
        .v-card:hover { transform: translateY(-10px); }
        .v-img { width: 100%; height: 180px; object-fit: cover; }
        .v-body { padding: 20px; }
        .v-sub { color: var(--main-purple); font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; }
        .v-title { font-size: 1.2rem; margin: 5px 0; height: 1.5em; overflow: hidden; }
        .v-meta { font-size: 0.85rem; color: #555; line-height: 1.7; }
        .v-note { font-size: 0.8rem; color: #888; font-style: italic; margin-top: 10px; }
        .v-link {
            display: block; text-align: center; margin-top: 15px; padding: 10px;
            background: var(--main-purple); color: white; text-decoration: none; border-radius: 10px;
        }

        /* éš±è—ä¸ç¬¦åˆç¯©é¸çš„å¡ç‰‡ */
        .hidden { display: none; }
/* å°è¦½åˆ— */
nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 10%;
    position: sticky;
    top: 0;
    background: rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(10px);
    z-index: 100;
}

nav .logo {
    font-size: 1.8rem;
    font-weight: bold;
    letter-spacing: 3px;
    color: var(--main-purple);
}

nav ul {
    display: flex;
    list-style: none;
    gap: 30px;
}

nav ul li a {
    text-decoration: none;
    color: var(--dark-purple);
    font-weight: 500;
    transition: 0.3s;
}

nav ul li a:hover {
    color: var(--main-purple);
}


    </style>
</head>
<body>
 <nav>
        <div class="logo">CRAVITY ç¶œè—æ´»å‹•</div>
        <ul>
            <li><a href="index.html">åœ˜é«”ä»‹ç´¹</a></li>
	    <li><a href="members.html">æˆå“¡ä»‹ç´¹</a></li>
            <li><a href="discography.html">æ‰“æ­Œæ´»å‹•</a></li>
            <li><a href="variety.html">ç¶œè—æ´»å‹•</a></li>
        </ul>
    </nav>
    <div class="filter-console">
        <div class="filter-group">
            <label>é—œéµå­—æœå°‹</label>
            <input type="text" id="search-text" placeholder="è¼¸å…¥ IdolRadio, èªè­˜çš„å“¥å“¥..." oninput="filterData()">
        </div>
        <div class="filter-group">
            <label>æˆå“¡ç¯©é¸</label>
            <select id="search-member" onchange="filterData()">
                <option value="">å…¨éƒ¨æˆå“¡</option>
                <option value="Cravity">å…¨é«”</option>
                <option value="ä¸–ç³">ä¸–ç³</option>
                <option value="Allen">Allen</option>
                <option value="å»·è¬¨">å»·è¬¨</option>
                <option value="å®‡ç’¸">å®‡ç’¸</option>
                <option value="å…ƒé€²">å…ƒé€²</option>
                <option value="ç‰ç†™">ç‰ç†™</option>
		<option value="åˆ‘æº–">åˆ‘æº–</option>
                <option value="å¤ªæ¦®">å¤ªæ¦®</option>
                <option value="æ€§ç‰">æ€§ç‰</option>
            </select>
        </div>
        <div class="filter-group">
            <label>èµ·å§‹æ—¥æœŸ</label>
            <input type="date" id="date-start" onchange="filterData()">
        </div>
        <div class="filter-group">
            <label>çµæŸæ—¥æœŸ</label>
            <input type="date" id="date-end" onchange="filterData()">
        </div>
    </div>

    <main id="variety-app">
        <section class="category-section" id="section-é›»å°">
            <h2 class="category-title">é›»å° RADIO</h2>
            <div class="variety-grid" id="grid-é›»å°"></div>
        </section>

        <section class="category-section" id="section-ç¶œè—">
            <h2 class="category-title">ç¶œè— VARIETY</h2>
            <div class="variety-grid" id="grid-ç¶œè—"></div>
        </section>

        <section class="category-section" id="section-æ¡è¨ª">
            <h2 class="category-title">æ¡è¨ª INTERVIEW</h2>
            <div class="variety-grid" id="grid-æ¡è¨ª"></div>
        </section>
    </main>

    <script>
        const SHEET_API = 'https://api.sheety.co/ä½ çš„ID/cravity/variety';
        let allVarietyData = [];

        async function loadVariety() {
            try {
                const response = await fetch(SHEET_API);
                const json = await response.json();
                allVarietyData = json.variety;
                renderVariety(allVarietyData);
            } catch (err) {
                console.error("è®€å–å¤±æ•—");
            }
        }

        function renderVariety(data) {
            // æ¸…ç©ºèˆŠå…§å®¹
            document.getElementById('grid-é›»å°').innerHTML = '';
            document.getElementById('grid-ç¶œè—').innerHTML = '';
            document.getElementById('grid-æ¡è¨ª').innerHTML = '';

            data.forEach(item => {
                const card = `
                    <div class="v-card" data-member="${item.cast}" data-date="${item.date}" data-sub="${item.subTitle}">
                        <img src="${item.imageUrl}" class="v-img">
                        <div class="v-body">
                            <div class="v-sub">${item.subTitle}</div>
                            <h3 class="v-title">${item.title}</h3>
                            <div class="v-meta">
                                ğŸ“… æ—¥æœŸï¼š${item.date}<br>
                                ğŸ‘¥ åƒèˆ‡ï¼š${item.cast}
                            </div>
                            <div class="v-note">ğŸ“ ${item.note || 'ç„¡å‚™è¨»'}</div>
                            <a href="${item.link}" target="_blank" class="v-link">è§€çœ‹å…§å®¹</a>
                        </div>
                    </div>
                `;
                const targetGrid = document.getElementById(`grid-${item.mainCategory}`);
                if (targetGrid) targetGrid.innerHTML += card;
            });
        }

        function filterData() {
            const searchText = document.getElementById('search-text').value.toLowerCase();
            const searchMember = document.getElementById('search-member').value;
            const dateStart = document.getElementById('date-start').value;
            const dateEnd = document.getElementById('date-end').value;

            const cards = document.querySelectorAll('.v-card');

            cards.forEach(card => {
                const sub = card.getAttribute('data-sub').toLowerCase();
                const member = card.getAttribute('data-member');
                const date = card.getAttribute('data-date'); // é æœŸæ ¼å¼ YYYY-MM-DD

                // ç¯©é¸é‚è¼¯
                const matchText = sub.includes(searchText);
                const matchMember = searchMember === "" || member.includes(searchMember);
                const matchDate = (!dateStart || date >= dateStart) && (!dateEnd || date <= dateEnd);

                if (matchText && matchMember && matchDate) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }

        loadVariety();
    </script>
</body>
</html>