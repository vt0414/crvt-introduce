<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRAVITY ç¶œè—æ´»å‹•</title>
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* --- ä¿®æ­£èƒŒæ™¯èˆ‡å…¨åŸŸè¨­å®š (è§£æ±ºæ–·å±¤) --- */
        body {
            background-attachment: fixed !important;
            background-size: cover !important;
            margin: 0;
            padding: 0;
        }

        /* ç¢ºä¿å…§å®¹ä¸è¢«å°è¦½åˆ—æ“‹ä½ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 20px 50px 20px;
        }

        /* --- æœå°‹æ¡†æ¨£å¼ --- */
        .search-wrapper {
            text-align: center;
            margin-bottom: 40px;
        }

        .search-input {
            width: 100%;
            max-width: 500px;
            padding: 12px 25px;
            border-radius: 30px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            color: white;
            backdrop-filter: blur(10px);
            font-size: 16px;
            outline: none;
        }

        /* --- ä¸‰å¤§é¡å€å¡Šæ¨™é¡Œ --- */
        .category-section {
            margin-bottom: 60px;
        }

        .category-title {
            font-size: 26px;
            color: #ff0000; /* CRAVITY ä»£è¡¨è‰² */
            border-bottom: 2px solid #ff0000;
            padding-bottom: 10px;
            margin-bottom: 30px;
            display: inline-block;
        }

        /* --- å¡ç‰‡ç¶²æ ¼ (èˆ‡æ‰“æ­Œèˆå°é¢¨æ ¼ä¸€è‡´) --- */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .variety-card {
    /* æ”¹ç‚ºè·Ÿæ‰“æ­Œèˆå°ä¸€è‡´çš„æ·ºè‰²é€æ˜æ„Ÿ */
    background: rgba(255, 255, 255, 0.1); 
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    overflow: hidden;
    transition: 0.3s ease;
}

.variety-card:hover {
    transform: translateY(-8px);
    /* æ‡¸åœæ™‚åŠ äº® */
    background: rgba(255, 255, 255, 0.2);
    border-color: #ff0000; 
}

/* ç¢ºä¿åœ–ç‰‡åŠ è¼‰å¤±æ•—æ™‚çš„èƒŒæ™¯è‰² */
.card-banner {
    width: 100%;
    height: 180px;
    object-fit: cover;
    background-color: #333; /* åœ–ç‰‡é‚„æ²’è·‘å‡ºä¾†å‰çš„åº•è‰² */
    display: block;
}

        .card-content {
            padding: 18px;
        }

        .v-subtitle { color: #00d2ff; font-size: 13px; font-weight: bold; }
        .v-title { font-size: 18px; margin: 8px 0; color: #fff; line-height: 1.4; height: 50px; overflow: hidden; }
        .v-info { font-size: 14px; color: #ccc; margin-bottom: 4px; }
        .v-note { font-size: 12px; color: #888; font-style: italic; margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px; }

        .watch-btn {
            display: block;
            text-align: center;
            background: #ff0000;
            color: white;
            text-decoration: none;
            padding: 10px;
            border-radius: 6px;
            margin-top: 15px;
            font-weight: bold;
            transition: 0.3s;
        }

        .watch-btn:hover { background: white; color: black; }
    </style>
</head>
<body>

    <nav>
        <div class="logo">CRAVITY ç¶œè—æ´»å‹•</div>
        <ul>
            <li><a href="index.html">åœ˜é«”ä»‹ç´¹</a></li>
            <li><a href="members.html">æˆå“¡ä»‹ç´¹</a></li>
            <li><a href="discography.html">æ‰“æ­Œæ´»å‹•</a></li>
            <li><a href="variety.html">ç¶œè—æ´»å‹•</a></li>
        </ul>
    </nav>

    <div class="container">
        <div class="search-wrapper">
            <input type="text" id="varietySearch" class="search-input" placeholder="æœå°‹ç¯€ç›®åç¨±ã€æ¨™é¡Œæˆ–æˆå“¡..." onkeyup="filterVariety()">
        </div>

        <div id="varietySections">
            <p style="text-align: center;">åŠ è¼‰ç¶œè—æ´»å‹•è³‡æ–™ä¸­...</p>
        </div>
    </div>

    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxoOChbgdxhQb-iAwLewfnQgt8kdcBf_lww5VtlHzJxK1_Wuuzz6IxUxvtnAihK-nBD/exec"; 
        let varietyData = [];

        // 1. å¾ Apps Script æŠ“å–è³‡æ–™
        async function fetchVariety() {
            try {
                const response = await fetch(`${SCRIPT_URL}?type=variety`);
                varietyData = await response.json();
                renderVariety(varietyData);
            } catch (error) {
                document.getElementById('varietySections').innerHTML = "<p style='text-align:center;'>è³‡æ–™è®€å–å¤±æ•—</p>";
            }
        }

        // 2. æ¸²æŸ“å¡ç‰‡ (ä¾ç…§ä¸‰å€‹åˆ†é¡)
        function renderVariety(data) {
            const displayArea = document.getElementById('varietySections');
            const categories = ["é›»å°", "ç¶œè—", "æ¡è¨ª"];
            let finalHtml = "";

            categories.forEach(cat => {
                const filteredItems = data.filter(item => item.mainCategory === cat);
                
                if (filteredItems.length > 0) {
                    finalHtml += `
                        <section class="category-section">
                            <h2 class="category-title">${cat}</h2>
                            <div class="card-grid">
                                ${filteredItems.map(item => `
                                    <div class="variety-card">
                                        <img class="card-banner" src="images/${item.imageUrl}" onerror="this.src='images/none.jpg'">
                                        <div class="card-content">
                                            <div class="v-subtitle">${item.subTitle}</div>
                                            <div class="v-title">${item.title}</div>
                                            <div class="v-info">ğŸ“… ${item.date ? item.date.split('T')[0] : 'TBA'}</div>
                                            <div class="v-info">ğŸ‘¥ ${item.cast}</div>
                                            ${item.note ? `<div class="v-note">${item.note}</div>` : ''}
                                            <a href="${item.link}" target="_blank" class="watch-btn">ç«‹å³è§€çœ‹</a>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </section>
                    `;
                }
            });

            displayArea.innerHTML = finalHtml || "<p style='text-align:center;'>ç›®å‰æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„å…§å®¹</p>";
        }

        // 3. æœå°‹éæ¿¾åŠŸèƒ½
        function filterVariety() {
            const searchTerm = document.getElementById('varietySearch').value.toLowerCase();
            const filtered = varietyData.filter(item => 
                item.title.toLowerCase().includes(searchTerm) || 
                item.subTitle.toLowerCase().includes(searchTerm) || 
                item.cast.toLowerCase().includes(searchTerm)
            );
            renderVariety(filtered);
        }

        window.onload = fetchVariety;
    </script>
</body>
</html>

